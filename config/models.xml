<?xml version="1.0" encoding="UTF-8"?>
<models>
    <model name="MediaMeta">
        <field name="media" model="Media" relation="belongsTo">
            <validation name="required" />
        </field>
        <field name="name" type="string">
            <validation name="required" />
        </field>
        <field name="value" type="text" localized="true" />

        <format name="title">{name}</format>
        <format name="teaser">{media.name}</format>

        <option name="behaviour.log" value="true" />
    </model>
    <model name="Media" modelClass="ride\web\cms\media\MediaModel" entryClass="ride\web\cms\media\MediaEntry">
        <field name="album" model="MediaAlbum" relation="belongsTo">
            <validation name="required" />
        </field>
        <field name="orderIndex" type="integer" />
        <field name="name" type="string" localized="true">
            <option name="label.name" value="label.name" />

            <validation name="required" />
        </field>
        <field name="description" type="wysiwyg" localized="true">
            <option name="label.name" value="label.description" />
        </field>
        <field name="thumbnail" type="image" />
        <field name="type" type="string" />
        <field name="value" type="string" />
        <field name="meta" model="MediaMeta" relation="hasMany" />
        <field name="slug" type="string" localized="true" />

        <format name="title">{name}</format>
        <format name="teaser">{type}: {value}</format>

        <option name="behaviour.date" value="true" />
        <option name="behaviour.log" value="true" />
        <option name="behaviour.slug" value="name" />
        <option name="behaviour.version" value="true" />
    </model>
    <model name="MediaAlbum" modelClass="ride\web\cms\media\MediaAlbumModel" entryClass="ride\web\cms\media\MediaAlbumEntry">
        <field name="parent" type="string">
            <option name="label.name" value="label.parent" />
        </field>
        <field name="orderIndex" type="integer" />
        <field name="name" type="string" localized="true">
            <option name="label.name" value="label.name" />
            <validation name="required" />
        </field>>
        <field name="description" type="wysiwyg" localized="true">
            <option name="label.name" value="label.description" />
        </field>
        <field name="media" model="Media" relation="hasMany" />
        <field name="slug" type="string" localized="true" />

        <format name="title">{name}</format>

        <option name="behaviour.date" value="true" />
        <option name="behaviour.log" value="true" />
        <option name="behaviour.slug" value="name" />
        <option name="behaviour.version" value="true" />
    </model>
</models>
